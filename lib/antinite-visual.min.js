!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("AntiniteVisualToolkit",[],t):"object"==typeof exports?exports.AntiniteVisualToolkit=t():e.AntiniteVisualToolkit=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dev/",t(t.s=6)}([function(e,t,r){"use strict";function n(e){if(!1===e||!0===e)return"BOOLEAN";switch((0,i.default)(e)){case"Object":return"HASH";case"Array":return"ARRAY";case"string":return"STRING";case"number":return"NUMBER";case"null":return"NULL";case"undefined":return"UNDEFINED";case"function":return"FUNCTION";case"RegExp":return"REGEXP";case"Date":return"DATE";case"Arguments":return"ARGUMENTS";default:return"OTHER"}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={interaction:{hover:!0},groups:{layer:{shape:"circle",font:{color:"#EEEEEE"},color:{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}}},service:{shape:"box",font:{color:"#EEEEEE"},color:{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}}},require:{shape:"triangle",size:16,color:{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}}},export:{shape:"triangleDown",size:16,color:{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}}},action:{shape:"dot",size:12,color:{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}}},action_read:{shape:"dot",size:12,color:{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}}},action_write:{shape:"dot",size:12,color:{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}}},action_execute:{shape:"dot",size:12,color:{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}}},service_other:{shape:"box",color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}}},layer_other:{shape:"circle",color:{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}}}},nodes:{shadow:!0},edges:{shadow:!0}};t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t){n(this,e),this.name=t,this.mountPoint=null,this.dataSet=null,this.network=null}return o(e,[{key:"setMountPoint",value:function(e){return this.mountPoint=e,this}},{key:"setData",value:function(e){return this.dataSet=e,this}},{key:"doDraw",value:function(){var e=this.getNetworkSet(this.dataSet),t=this.getOptions();return this.network=new vis.Network(this.mountPoint,e,t),this.doPostDraw(),this}},{key:"getName",value:function(){return this.name}},{key:"getNetworkSet",value:function(){throw Error("must be realized at child")}},{key:"getOptions",value:function(){return{}}},{key:"doPostDraw",value:function(){}},{key:"destroy",value:function(){null!==this.network&&(this.network.destroy(),this.network=null)}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=r(7),l=n(u),s=r(10),c=n(s),f=r(12),d=n(f),h=r(13),p=n(h),v=r(4),g=n(v),y=r(5),b=n(y),m=r(14),k=n(m),E="ï¹…",w=".",O=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,e),this.originalObj=t,this.options=r,this.isConvertIncomePatterns=!0,this.logger=new p.default(r),this.dotForger=new l.default(E,{log:this.logger.mustDo("logging")}),this.doTransormRegExp=this.doTransormRegExp.bind(this),this.stringificator=new c.default(t,E,this.doTransormRegExp,{log:this.logger.mustDo("logging")}),this.finalizer=new d.default(E,w)}return a(e,[{key:"search",value:function(e,t,r){var n=(0,k.default)({key:1,value:2},r);return this.logger.mustDo("warning")&&n.key>=n.value&&console.warn("for reverse interpretation direction it would be better to use #searchBack()\n|key_order| = |"+n.key+"|\n|value_order| = |"+n.value+"|"),this.seekOutAny(e,t,n)}},{key:"searchBack",value:function(e,t,r){var n=(0,k.default)({key:2,value:1},r);return this.logger.mustDo("warning")&&n.value>=n.key&&console.warn("for direct interpretation direction it would be better to use #search()\n|key_order| = |"+n.key+"|\n|value_order| = |"+n.value+"|"),this.seekOutAny(e,t,n)}},{key:"seekOut",value:function(e,t,r){return this.search(e,t,r)}},{key:"seekOutVerso",value:function(e,t,r){return this.searchBack(e,t,r)}},{key:"timeOnDemand",value:function(e,t){var r=void 0,n=this.logger.mustDo("timing");return n&&console.time(e),r=t(),n&&console.timeEnd(e),r}},{key:"rakeStringify",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return this.timeOnDemand("rakeStringify",function(){return t.stringificator.stringifyObject(e,r)})}},{key:"doTransormRegExp",value:function(e){return-1!==e.source.indexOf(E)?(this.logger.mustDo("logging")&&console.log("doTransormRegExp: skip converting for |"+e+"|"),e):this.dotForger.doForgeDots(e)}},{key:"getInternalDelimiter",value:function(){return this.getPathDelimiter("INTERNAL")}},{key:"getPathDelimiter",value:function(e){switch(e.toUpperCase()){case"INTERNAL":return E;case"EXTERNAL":return w;default:throw Error("dont know path delimiter, named |"+e+"|, mistype?")}}},{key:"getDataByPath",value:function(e,t,r){var n=void 0;return r||(r=e&&-1!==e.indexOf(E)?E:w),t||(t=this.originalObj),n=e.split(r),n.reduce(function(e,t){return e[t]},t)}},{key:"seekOutAny",value:function(e,t,r){var n=void 0,o=void 0,a=void 0,u=void 0,l=this.rakeStringify(),s=(0,g.default)(e,"seek_rule"),c=i(s,2);return n=c[0],o=c[1],a=this.buildSeekFunction(n,o,r),u=this.proceedSeekingOut(a,l),this.proceedFinalization(t,u)}},{key:"proceedFinalization",value:function(e,t){var r=this;return this.timeOnDemand("finalization",function(){return r.finalizer.finalizeResult(e,t)})}},{key:"proceedSeekingOut",value:function(e,t){return this.timeOnDemand("searching",function(){return e(t)})}},{key:"buildSeekFunction",value:function(e,t,r){switch(e){case"REGEXP":return this.isConvertIncomePatterns&&(t=this.doTransormRegExp(t)),(0,b.default)(function(e,n){var o=e.match(t);o&&n(o[r.key],o[r.value])});case"FUNCTION":return(0,b.default)(t);default:throw Error("cant process type |"+e+"|, halt!")}}}]),e}();t.default=O},function(e,t,r){"use strict";function n(e,t,r){var n=void 0,o=(0,i.default)(e),a=function(e,r){return e+"\n|argName| = |"+t+"|\n|type| = |"+r+"|\n|arg| = |#{arg}|"};switch(o){case"STRING":try{n=["REGEXP",RegExp(e)]}catch(e){throw SyntaxError(a("cant compile this String to RegExp",o))}break;case"REGEXP":n=["REGEXP",e];break;case"FUNCTION":n=["FUNCTION",e];break;default:throw TypeError(a("argument must be String, RegExp or Function, but got",o))}if(r&&n[0]!==r.toUpperCase())throw TypeError(a("argument must be "+r+", but got",o));return n}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=n},function(e,t,r){"use strict";function n(e){return function(t,r){var n=(0,a.default)(t),o=(0,a.default)(r);"NULL"!==n&&"UNDEFINED"!==n&&"NULL"!==o&&"UNDEFINED"!==o&&(e[t]||(e[t]=[]),e[t].push(r))}}function o(e){return function(t){var r={},o=(0,a.default)(t),i=n(r);switch(o){case"ARRAY":t.forEach(function(t){e(t,i)});break;case"HASH":Object.keys(t).forEach(function(r){e(r,t[r],i)});break;default:throw Error("cant work with object type |"+o+"|")}return r}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=r(3),l=n(u),s=r(15),c=n(s),f=r(16),d=n(f),h=r(17),p=n(h),v=function(){function e(t,r){o(this,e),this.mountPoint=t,this.dataIn=r,this.tinyDataObj=new l.default(r,{debug:!1}),this.globalDiagram=new c.default,this.detailPoint=null,this.detailGraph=null,this.globalClickHandler=this.globalClickHandler.bind(this)}return a(e,[{key:"doDraw",value:function(){var e=this.buildSubMointPoints(),t=e.globalPoint,r=e.detailPoint;this.detailPoint=r,this.doDrawGlobal(t)}},{key:"doDrawGlobal",value:function(e){this.globalDiagram.setMountPoint(e).setData(this.dataIn).setClickHandler(this.globalClickHandler).doDraw()}},{key:"buildSubMointPoints",value:function(){var e=document.createElement("div"),t=document.createElement("div");return e.setAttribute("style","width:69%; border: 1px solid #FF7F50; float: left; min-height: 100%;"),t.setAttribute("style","width:29%; border: 1px solid #FF7F50; float: left; min-height: 100%;"),this.mountPoint.appendChild(e),this.mountPoint.appendChild(t),{globalPoint:e,detailPoint:t}}},{key:"globalClickHandler",value:function(e){var t=void 0,r=void 0;if(e){var n=this.getServicePath(e),o=i(n,2);t=o[0],r=o[1],r?this.doShowDetailService(t,r):this.doShowDetailLayer(t)}else this.doClearDetail()}},{key:"getServicePath",value:function(e){var t=void 0,r=void 0,n=void 0,o=void 0,a=void 0,u=void 0,l=void 0,s=void 0;if(!e)return[];var c=e.split(".",2),f=i(c,2);return n=f[0],o=f[1],t="^(\\d+)\\.name\\.("+n+")",r="^(\\d+)\\.services\\.(\\d+)\\.name\\."+o,a=this.tinyDataObj.seekOutVerso(t),u=this.tinyDataObj.seekOut(r),l=a[n],s=u[l],l.concat(s)}},{key:"doClearDetail",value:function(){null!==this.detailGraph&&(this.detailGraph.destroy(),this.detailGraph=null)}},{key:"doShowDetailLayer",value:function(e){this.getCurrentDetail()!==e&&(this.doClearDetail(),this.detailGraph=new d.default(e),this.detailGraph.setMountPoint(this.detailPoint).setData(this.dataIn).doDraw())}},{key:"doShowDetailService",value:function(e,t){this.getCurrentDetail()!==e+"."+t&&(this.doClearDetail(),this.detailGraph=new p.default(e+"."+t),this.detailGraph.setMountPoint(this.detailPoint).setData(this.dataIn).doDraw())}},{key:"getCurrentDetail",value:function(){if(null!==this.detailGraph)return this.detailGraph.getName()}}]),e}();t.default=v,e.exports=t.default},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=/((?:^|(?:(?:^|[^\\])\\(?:\\{2})*\\)|[^\\]+))(\[(?:]|(?:[^\\]+])|(?:.*?[^\\]+])|(?:.*?[^\\]+\\(?:\\{2})*\\])))/,l=/((?:^|[^\\])(?:\\{2})*)(\\\.)/,s=function(){function e(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];n(this,e),this.dotSubstitute=t,this.isDoLogging=r.log,this.doValidateDotSubstitute(this.dotSubstitute)}return o(e,[{key:"doValidateDotSubstitute",value:function(e){if(!e||"STRING"!==(0,a.default)(e))throw TypeError("constructor must be called with string as dot substitute, but got:\n|dotSubstitute| = |"+e+"|")}},{key:"getPatternByName",value:function(e){switch(e.toUpperCase()){case"CHARACTER_SET":return u;case"ESCAPED_DOT":return l;default:throw Error("so far dont know pattern, named |"+e+"|, mistype?")}}},{key:"doForgeDots",value:function(e){if(!e||"REGEXP"!==(0,a.default)(e))throw TypeError("must be called with RegExp, but got:\n|inRegexp| = |"+e+"|");return new RegExp(this.forgeEscapedDots(this.forgeCharacterSet(e.source)))}},{key:"forgeCharacterSet",value:function(e){var t=this,r=new RegExp(this.getPatternByName("character_set").source,"g"),n=function(e,r,n){return""+r+n.replace(/\./g,t.dotSubstitute)};return e.replace(r,n)}},{key:"forgeEscapedDots",value:function(e){var t=this,r=new RegExp(this.getPatternByName("escaped_dot").source,"g"),n=function(e,r,n){return""+r+n.replace(/\\\./,t.dotSubstitute)};return e.replace(r,n)}}]),e}();t.default=s},function(e,t,r){"use strict";(function(t){var r="function"==typeof Promise,n="undefined"!=typeof window?window:void 0!==t?t:self,o="location"in n&&"document"in n,i="undefined"!=typeof Symbol,a="undefined"!=typeof Map,u="undefined"!=typeof Set,l="undefined"!=typeof WeakMap,s="undefined"!=typeof WeakSet,c="undefined"!=typeof DataView,f=i&&void 0!==Symbol.iterator,d=i&&void 0!==Symbol.toStringTag,h=u&&"function"==typeof Set.prototype.entries,p=a&&"function"==typeof Map.prototype.entries,v=h&&Object.getPrototypeOf((new Set).entries()),g=p&&Object.getPrototypeOf((new Map).entries()),y=f&&"function"==typeof Array.prototype[Symbol.iterator],b=y&&Object.getPrototypeOf([][Symbol.iterator]()),m=f&&"function"==typeof String.prototype[Symbol.iterator],k=m&&Object.getPrototypeOf(""[Symbol.iterator]());e.exports=function(e){var t=typeof e;if("object"!==t)return t;if(null===e)return"null";if(e===n)return"global";if(Array.isArray(e)&&(!1===d||!(Symbol.toStringTag in e)))return"Array";if(o){if(e===n.location)return"Location";if(e===n.document)return"Document";if(e===(n.navigator||{}).mimeTypes)return"MimeTypeArray";if(e===(n.navigator||{}).plugins)return"PluginArray";if(e instanceof HTMLElement&&"BLOCKQUOTE"===e.tagName)return"HTMLQuoteElement";if(e instanceof HTMLElement&&"TD"===e.tagName)return"HTMLTableDataCellElement";if(e instanceof HTMLElement&&"TH"===e.tagName)return"HTMLTableHeaderCellElement"}var i=d&&e[Symbol.toStringTag];if("string"==typeof i)return i;var f=Object.getPrototypeOf(e);return f===RegExp.prototype?"RegExp":f===Date.prototype?"Date":r&&f===Promise.prototype?"Promise":u&&f===Set.prototype?"Set":a&&f===Map.prototype?"Map":s&&f===WeakSet.prototype?"WeakSet":l&&f===WeakMap.prototype?"WeakMap":c&&f===DataView.prototype?"DataView":a&&f===g?"Map Iterator":u&&f===v?"Set Iterator":y&&f===b?"Array Iterator":m&&f===k?"String Iterator":null===f?"Object":Object.prototype.toString.call(e).slice(8,-1)},e.exports.typeDetect=e.exports}).call(t,r(9))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),u=n(a),l=r(11),s=n(l),c=function(){function e(t,r,n){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];o(this,e),this.originalObj=t,this.internalPathDelimiter=r,this.regexpTransformationFn=n,this.cacheStringifyedObject=null,this.stringificationRule={stubsList:[],stringifyFilter:null},this.maxTextLong=120,this.isConvertIncomePatterns=!0,this.isDoLogging=i.log}return i(e,[{key:"stringifyObject",value:function(e,t){var r=!1,n=this.stringificationRule.stringifyFilter,o=this.stringificationRule.stubsList;return e||(e=n),t||(t=o),r=this.cacheStringifyedObject&&(0,s.default)(e,n)&&(0,s.default)(t,o),this.isDoLogging&&console.log("stringify cache "+(r?"hit":"miss")),r||(this.cacheStringifyedObject=this.doStringification(e,t)),this.cacheStringifyedObject}},{key:"doStringification",value:function(e,t){var r=void 0,n=void 0,o=[],i=this.makeElementFilter(e),a=this.makeStringLimiter(this.maxTextLong),l=this.internalPathDelimiter,s=e?i:function(){return!0};return function e(t,i,c){switch(r=(0,u.default)(t)){case"HASH":n=Object.keys(t),n.length?n.forEach(function(r){s(i,r,c)&&e(t[r],""+i+r+l,c+1)}):e("__EMPTY__|HASH|",i,c);break;case"ARRAY":t.length?t.forEach(function(t,r){s(i,r,c)&&e(t,""+i+r+l,c+1)}):e("__EMPTY__|ARRAY|",i,c);break;case"NUMBER":case"BOOLEAN":case"NULL":o.push(""+i+t);break;case"STRING":o.push(a(i,t,c));break;case"DATE":case"REGEXP":o.push(i+"__"+r+"__|"+t+"|__");break;default:o.push(i+"__"+r+"__")}}(this.originalObj,"",0),o}},{key:"makeStringLimiter",value:function(e){return function(t,r){var n=r.length;return n>=e?t+"__LONG_TEXT__|"+n+"|":""+t+r}}},{key:"makeElementFilter",value:function(e){var t=void 0,r=void 0;return"HASH"===(0,u.default)(e)&&e.originPattern?(r=e.originPattern,this.isConvertIncomePatterns&&(r=this.regexpTransformationFn(r)),t=function(t,n){return t===e.elementName&&r.test(n)}):t=function(t){return t===e.elementName},function(r,n,o){return e.applyOnDepth!==o||t(n,r)}}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e,t){return JSON.stringify(e)===JSON.stringify(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),u=n(a),l=r(4),s=n(l),c=r(5),f=n(c),d=function(){function e(t,r){o(this,e),this.dotInternal=t,this.dotExternal=r,this.convertBeforeFinalizeFunction=!0,this.convertOutResult=!0}return i(e,[{key:"finalizeResult",value:function(e,t){var r=this.getFinalizationName(e);return r?this.prepareFinalization(r,e)(t):t}},{key:"getFinalizationName",value:function(e){var t=!1;if(e&&(0,s.default)(e,"finalizeFn","Function")){if(this.convertBeforeFinalizeFunction)return"DECORATE_THEN_FINALAZE";t=!0}if(this.convertOutResult)return t?"FINALAZE_THEN_DECORATE":"DECORATE"}},{key:"prepareFinalization",value:function(e,t){var r=this.buildResultConvertor(),n=this.buildUserFinalizer(t);switch(e){case"DECORATE":return function(e){return r(e)};case"FINALAZE_THEN_DECORATE":return function(e){return r(n(e))};case"DECORATE_THEN_FINALAZE":return function(e){return n(r(e))};default:throw Error("unknown finalization style |"+e+"| used, halt!")}}},{key:"makeBuffingDelimiterWeel",value:function(){var e=this.dotExternal,t=this.dotInternal,r=new RegExp(t,"g");return function(n){var o=void 0;return"STRING"!==(0,u.default)(n)?n:(o=t===n.charAt(n.length-1)?n.slice(0,-1):n,o.replace(r,e))}}},{key:"buildResultConvertor",value:function(){var e=this.makeBuffingDelimiterWeel();return function(t){var r=void 0,n=void 0,o={};return Object.keys(t).forEach(function(i){n=t[i],r=e(i),o[r]=new Array(n.length),n.forEach(function(t,n){o[r][n]=e(t)})}),o}}},{key:"buildUserFinalizer",value:function(e){return(0,f.default)(e)}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(t){n(this,e),this.options=t,this.state={DEBUGGING:!1,LOGGING:!1,TIMING:!1,WARNING:!1},this.processOptions(),this.initState()}return o(e,[{key:"processOptions",value:function(){this.options&&!0===this.options.debug?(this.state.DEBUGGING=!0,this.options.timing=!0,this.options.logging=!0,this.options.warning=!0):this.state.debug=!1}},{key:"initState",value:function(){this.options&&(!0===this.options.timing&&"FUNCTION"===(0,a.default)(console.time)&&(this.state.TIMING=!0),!0===this.options.logging&&"FUNCTION"===(0,a.default)(console.log)&&(this.state.LOGGING=!0),!0===this.options.warning&&"FUNCTION"===(0,a.default)(console.warn)&&(this.state.WARNING=!0))}},{key:"mustDo",value:function(e){var t=e.toUpperCase(),r=this.state[t];if("BOOLEAN"!==(0,a.default)(r))throw Error("dont know |"+e+"| state");return r}}]),e}();t.default=u},function(e,t,r){"use strict";function n(e,t){var r=void 0,n={};if("HASH"!==(0,i.default)(e))throw TypeError("must called with object, but get |"+e+"|");return"HASH"!==(0,i.default)(t)?e:(Object.keys(e).forEach(function(o){r=(0,i.default)(t[o]),n[o]="NULL"!==r&&"UNDEFINED"!==r?t[o]:e[o]}),n)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=r(1),s=n(l),c=r(2),f=n(c),d=function(e){function t(e){o(this,t);var r=i(this,Object.getPrototypeOf(t).call(this,e));return r.clickHandler=r.clickHandler.bind(r),r.changeCursorBuilder=r.changeCursorBuilder.bind(r),r.onServiceHandler=function(){},r}return a(t,e),u(t,[{key:"setClickHandler",value:function(e){return this.onServiceHandler=e,this}},{key:"getSubSet",value:function(e,t){var r=void 0,n=[],o=[];return t.forEach(function(t){r=e+"."+t.name,n.push({id:r,label:t.name,group:"service"}),o.push({from:e,to:r})}),{nodes:n,edges:o}}},{key:"getNetworkSet",value:function(e){var t=this,r=void 0,n=[],o=[];return e.forEach(function(e){n.push({id:e.name,label:e.name,group:"layer"}),0!==e.services.length&&(r=t.getSubSet(e.name,e.services),n=n.concat(r.nodes),o=o.concat(r.edges))},this),{nodes:new vis.DataSet(n),edges:new vis.DataSet(o)}}},{key:"getOptions",value:function(){return s.default}},{key:"doPostDraw",value:function(){this.network.on("click",this.clickHandler),this.network.on("hoverNode",this.changeCursorBuilder("pointer")),this.network.on("blurNode",this.changeCursorBuilder("default"))}},{key:"clickHandler",value:function(e){0===e.nodes.length?this.onServiceHandler():this.onServiceHandler(e.nodes.shift())}},{key:"changeCursorBuilder",value:function(e){var t=this.mountPoint.getElementsByTagName("canvas")[0];return function(){t.style.cursor=e}}}]),t}(f.default);t.default=d,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=r(1),s=n(l),c=r(2),f=n(c),d=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),u(t,[{key:"getSubSet",value:function(e,t){var r=void 0,n=[],o=[];return t.forEach(function(t){r=e+"."+t.name,n.push({id:r,label:t.name+" ("+t.acl+")",group:"service",level:1}),o.push({from:e,to:r})}),{nodes:n,edges:o}}},{key:"getNetworkSet",value:function(e){var t=void 0,r=[],n=[],o=e[this.name];return r.push({id:o.name,label:o.name,group:"layer",level:0}),0!==o.services.length&&(t=this.getSubSet(o.name,o.services),r=r.concat(t.nodes),n=n.concat(t.edges)),{nodes:new vis.DataSet(r),edges:new vis.DataSet(n)}}},{key:"getOptions",value:function(){var e={layout:{hierarchical:{direction:"LR"}}};return Object.assign({},s.default,e)}}]),t}(f.default);t.default=d,e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=r(3),c=n(s),f=r(1),d=n(f),h=r(2),p=n(h),v=function(e){function t(e){o(this,t);var r=i(this,Object.getPrototypeOf(t).call(this,e));return r.tinyDataObj=null,r}return a(t,e),l(t,[{key:"setData",value:function(e){return this.dataSet=e,this.tinyDataObj=new c.default(e,{debug:!1}),this}},{key:"getNetworkSet",value:function(e){var t=void 0,r=void 0,n=void 0,o=void 0,i=void 0,a=void 0,l=void 0,s=[],c=[],f=this.getNamePair(),d=u(f,2);return n=d[0],o=d[1],i=e[n].services[o],a="root."+i.name,l=e[n].name,s.push({id:a,label:i.name+" ("+i.acl+")",group:"service",level:4}),t=this.getExportSet(l,a,i),r=this.getRequireSet(a,i),s=s.concat(t.nodes,r.nodes),c=c.concat(t.edges,r.edges),{nodes:new vis.DataSet(s),edges:new vis.DataSet(c)}}},{key:"getExportSet",value:function(e,t,r){var n=this,o=void 0,i=void 0,a=void 0,u=r.name,l=t+".export",s=r.export,c=[],f=[],d={},h={};return c.push({id:l,label:"export",group:"export",level:3}),f.push({from:t,to:l}),Object.keys(s).forEach(function(t){o=s[t],i=l+"."+t,c.push({id:i,label:t+"\n("+o+")",group:"action_"+o,level:2}),f.push({from:l,to:i}),a=n.getExportUpsideDownConsumer(e,u,t),Object.keys(a).forEach(function(e){var t="export."+e,r=a[e];d[t]||(c.push({id:t,label:e,group:"layer_other",level:0}),d[t]=!0),r.forEach(function(e){var r=t+"."+e;h[r]||(c.push({id:r,label:e,group:"service_other",level:1}),f.push({from:r,to:t}),h[r]=!0),f.push({from:r,to:i})})})},this),{nodes:c,edges:f}}},{key:"getExportUpsideDownConsumer",value:function(e,t,r){var n=this.dataSet,o="^(\\d+)\\.services\\.(\\d+\\.require\\.\\d+)\\.actions\\."+r+"\\.resolved\\."+e,i=function(e,r,o){var i=void 0,a=void 0,u=void 0,l=[];r.forEach(function(r){i=r.split("."),a=i[0],u=i[2],n[e].services[a].require[u].name===t&&l.push(n[e].services[a].name)}),o(n[e].name,l)};return this.tinyDataObj.seekOut(o,i)}},{key:"getRequireSet",value:function(e,t){var r=void 0,n=void 0,o=void 0,i=void 0,a=e+".require",u=t.require,l=[],s=[];return 0===u.length?{nodes:l,edges:s}:(l.push({id:a,label:"require",group:"require",level:5}),s.push({from:e,to:a}),r=this.getRequireUpsideDownDict(u),Object.keys(r).forEach(function(e){n="require."+e,l.push({id:n,label:e,group:"layer_other",level:8}),Object.keys(r[e]).forEach(function(t){o=n+"."+t,l.push({id:o,label:t,group:"service_other",level:7}),s.push({from:o,to:n}),Object.keys(r[e][t]).forEach(function(e){i=o+"."+e,l.push({id:i,label:e,group:"action",level:6}),s.push({from:o,to:i},{from:a,to:i})})})}),{nodes:l,edges:s})}},{key:"getRequireUpsideDownDict",value:function(e){var t=void 0,r=void 0,n=void 0,o={};return e.forEach(function(e){n=e.name,Object.keys(e.actions).forEach(function(i){t=e.actions[i],r=t.resolved,o[r]||(o[r]={}),o[r][n]||(o[r][n]={}),o[r][n][i]=t.isReady})}),o}},{key:"getNamePair",value:function(){return this.name.split(".",2)}},{key:"getOptions",value:function(){var e={nodes:{fixed:!0},layout:{hierarchical:{direction:"UD",levelSeparation:100,nodeSpacing:100}}};return Object.assign({},d.default,e)}}]),t}(p.default);t.default=v,e.exports=t.default}])});